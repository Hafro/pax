% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pax_add.R
\name{pax_add_groupings}
\alias{pax_add_groupings}
\alias{pax_def_groupings}
\alias{pax_add_lgroups}
\alias{pax_add_regions}
\alias{pax_add_ocean_depth_class}
\alias{pax_add_gear_group}
\alias{pax_add_temporal_grouping}
\alias{pax_add_yearly_grouping}
\title{Add multiple groupings simulataneously}
\usage{
pax_add_groupings(
  tbl,
  groupings = pax_def_groupings(),
  ignore_missing_col = TRUE
)

pax_def_groupings(
  lgroups = seq(0, 200, 5),
  regions = list(all = 101:115),
  tgroup = NULL,
  ygroup = NULL,
  gear_group = NULL,
  ocean_depth = NULL,
  ...
)

pax_add_lgroups(tbl, lgroups, ignore_missing_col = FALSE)

pax_add_regions(
  tbl,
  regions = list(all = 101:115),
  division_tbl = pax_temptbl(dbplyr::remote_con(tbl), "paxdat_gridcell"),
  ignore_missing_col = FALSE
)

pax_add_ocean_depth_class(
  tbl,
  ocean_depth_tbl = dplyr::tbl(dbplyr::remote_con(tbl), "ocean_depth"),
  breaks = c(0, 100, 200, 300),
  ignore_missing_col = FALSE
)

pax_add_gear_group(tbl, gear_group = NULL, ignore_missing_col = FALSE)

pax_add_temporal_grouping(
  tbl,
  tgroup = list(t1 = 1:6, t2 = 7:12),
  ignore_missing_col = FALSE
)

pax_add_yearly_grouping(tbl, ygroup = NULL, ignore_missing_col = FALSE)
}
\arguments{
\item{tbl}{A dplyr query to apply grouping operations to}

\item{groupings}{List of groupings generated by \code{pax_def_groupings()}, will apply each grouping operation in turn}

\item{ignore_missing_col}{Boolean, should we ignore grouping columns that aren't present in the data?}

\item{lgroups}{Vector of cut-off points. Values define lower bounds, everything above the final bound is considered part of the plus group}

\item{regions}{List of region name to a vector of divisions, divisions are groups of gridcells described by \var{division_tbl}. Vectors can be NULL ("Other" value for gridcells without a matching division/region)}

\item{tgroup}{List mapping temporal groups(seasons) to a vector of \code{month} integers, i.e. \code{1:12}. Vectors can contain NA for any columns without a month value. If not supplied, \code{list(year = 1:12)} is used.}

\item{ygroup}{List mapping year groups to a vector of \code{year} integers, i.e. \code{1:12}. Vectors can contain NA for any columns without a year value. If not supplied, there will be one \code{ygroup} per \code{year}.}

\item{gear_group}{List mapping gear names to a vector of \code{mfdb_gear_code} values. Vectors can contain NA (i.e. missing gear codes will be assigned here) or NULL ("Other" value used for unassigned gear codes)}

\item{division_tbl}{Mapping of gridcell -> division, by default the internal \link{gridcell} mapping}

\item{ocean_depth_tbl}{Table containing a mapping from \code{h3_cell} to \code{ocean_depth}, used when the \code{ocean_depth} column is \code{NA}}

\item{breaks}{Ocean depth breaks, everything beyond the final group is part of a plus group}
}
\value{
\subsection{pax_add_groupings}{A dplyr query, with all grouping columns added}

\subsection{pax_def_groupings}{List of grouping parameters to hand to \code{pax_add_groupings()}}

\subsection{pax_add_lgroups}{Query with an additional \code{lgroup} column, binning a \code{length} column}

\subsection{pax_add_regions}{Query with an additional \code{region} column, binning a \code{gridcell} column}

\subsection{pax_add_ocean_depth_class}{Query with an additional \code{ocean_depth_class} column, binning a \code{ocean_depth} or \code{h3_cells} column}

\subsection{pax_add_gear_group}{Query with an additional \code{gear_name} column, binning a \code{mfdb_gear_code} column}

\subsection{pax_add_temporal_grouping}{Query with an additional \code{tgroup} column, binning a \code{month} column}

\subsection{pax_add_yearly_grouping}{Query with an additional \code{ygroup} column, binning a \code{year} column}
}
\description{
Add columns that bin rows into groups. Either use \code{pax_add_groupings()} to
add any possible groupings, or individual \verb{pax_add_*} functions to add a given group.
}
