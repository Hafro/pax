% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pax_logbook.R
\name{pax_logbook}
\alias{pax_logbook}
\alias{pax_add_cpue}
\alias{pax_logbook_cpue_plot}
\title{Create CPUE plot from logbook}
\usage{
pax_add_cpue(tbl)

pax_logbook_cpue_plot(tbl, year_end = lubridate::year(Sys.Date()), limit = 0.5)
}
\arguments{
\item{tbl}{A dplyr query from a logbook table}

\item{year_end}{Filter any data at/after this year}

\item{limit}{Ignore records over this proportion of \code{catch_total}}
}
\value{
\subsection{pax_add_cpue}{A table with an additional cpue column, with effort calculated by the first available value from \code{tow_time}, \code{tow_hooks} or \code{tow_num_nets}}

\subsection{pax_logbook_cpue_plot}{A ggplot2 plot of CPUE}
}
\description{
Calculate CPUE, create plot from logbook data
}
\examples{
pcon <- pax::pax_connect(":memory:")
# NB: Ordinarily this would be fed in by pax::pax_mar_logbook()
pax_import(pcon, read.table(text = "
	year	mfdb_gear_code	tow_hooks	tow_time	tow_num_nets	catch	catch_total
1	2000	LLN		1		120		5		1e5	10e5
2	2001	LLN		NA		110		NA		2e5	10e5
3	2002	LLN		NA		120		NA		1e5	10e5
"), name = "ex_logbook")
dplyr::tbl(pcon, "ex_logbook") |> pax_add_cpue() |> pax_logbook_cpue_plot()
}
